<div class="profile">
  <div class="upper-row">
    <div class="rhc"></div>
    <div class="lhc">
      <div class="profile-detail">
        <%= image_tag "default_user.png" %>
        <div class="info">
          <h1><%= @user.name %></h1>
          
          <%- unless current_zooniverse_user == @user %>
            <div class="user-actions" id="report-user-link-<%= @user.id %>">
              <ul>
                <li><%= link_to t('messages.send_to').upcase, new_message_url(:recipient_name => @user.name) %></li>
                <li><%= link_to("REPORT THIS USER", report_user_path(@user), { :remote => true, :method => :post, :method => :post, :style => "color:#2276BB;" }) %></li>
              </ul>
            </div>
          <% end -%>
        </div>
      </div>
    </div>
  </div>
  <div class="lower-row">
    <div class="rhc" >
      <%- if current_zooniverse_user.moderator? && current_zooniverse_user != @user %>
        <div class="panel admin-panel">
          <h2>Administration</h2>
          <div class="inner">
            <div id="moderation-links">
              <%= render :partial => "state" %>
            </div>
          </div>
        </div>
      <% end -%>
      
      <div class="panel my-collections">
        <h2><%= "My " if current_zooniverse_user == @user %>Collections</h2>
        <div class="inner">
          <%- unless @collections.empty? %>
            <% @collections.each do |collection| %>
              <div class="collection">
                <%= link_to image_tag(collection.assets.first.thumbnail_location, :class => "collection-thumbnail", :width => 75, :height => 50), collection_path(collection.zooniverse_id) unless collection.assets.empty? %>
                <div class="collection-info">
                  <%= link_to truncate(collection.name, :length => 25, :separator => ' '), collection_path(collection.zooniverse_id) %>
                  <ul>
                    <li><%= pluralize collection.assets.size, "item"%></li>
                    <li><%= pluralize collection.discussions.size, "discussion"%></li>
                  </ul>
                </div>
              </div>
            <% end -%>
          <%- else -%>
            <p>No Collections</p>
          <% end -%>
        </div>
        <%- if current_zooniverse_user == @user %>
          <div class="new">
            <%= link_to (t 'collection.startnewcol'), new_collection_path() %>
          </div>
        <% end -%>
      </div>
    </div>
    <div class="lhc">
      <div class="panel popular-discussions">
        <h2>Popular Discussions</h2>
        <div class="inner">
          <%- unless @discussions.nil? %>
            <%= render :partial => "discussions/list_trending" %>
          <%- else -%>
            <p>No discussions</p>
          <% end -%>
        </div>
        
        <%- if @discussions.total_pages > 1 %>
          <div class="more-results"><%= more_discussions "More", :page => @discussion_page + 1, :id => @user.id %></div>
        <% end -%>
      </div>
      
      <div class="panel user-comments">
        <h2>Latest Comments</h2>
        <div class="inner">
          <%= render :partial => "comments/recent" %>
        </div>
        <%- if @comments.total_pages > 1 %>
          <div class="more-results"><%= more_comments "More", :page => @comment_page + 1, :id => @user.id %></div>
        <% end -%>
      </div>
    </div>
  </div>
</div>
